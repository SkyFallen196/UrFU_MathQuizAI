import random

from utils.template_handler import handle_template_mode


def handle_matrix_determinant_2x2_mode():
    template = """Составь задание без вариантов ответа и без решения, в котором требуется вычислить определитель матрицы 2x2.

Требования:

- Используй следующий шаблон, сохраняя его структуру и формулировку:
Дана матрица A = [[a, b], [c, d]]. Чему равен определитель данной матрицы?
- Важно: используй только латинскую букву 'A' для обозначения матрицы. Не используй кириллическую букву 'А'.
- Не добавляй кавычки в начале и в конце предложения.
- Замени буквы a, b, c и d на свои собственные числа – целые однозначные числа от -9 до 9 (включая 0).
- Не используй буквы или переменные в матрице, только числа.
- Числа должны быть выбраны так, чтобы вычисление определителя не было слишком сложным.
- Избегай дополнительных комментариев или отклонений от шаблона.

Примеры:

1. Дана матрица A = [[5, -2], [7, 4]]. Чему равен определитель данной матрицы?
2. Дана матрица A = [[3, 1], [-6, 8]]. Чему равен определитель данной матрицы?
3. Дана матрица A = [[0, 5], [-9, 2]]. Чему равен определитель данной матрицы?
"""
    handle_template_mode(template, "Вычисление определителя матрицы 2x2", operation="determinant")


def handle_matrix_determinant_3x3_mode():
    template = """Составь задание без вариантов ответа и без решения, в котором требуется вычислить определитель матрицы 3x3.

Требования:

- Используй следующий шаблон, сохраняя его структуру и формулировку:
Дана матрица A = [[a, b, c], [d, e, f], [g, h, i]]. Чему равен определитель данной матрицы?
- Важно: используй только латинскую букву 'A' для обозначения матрицы. Не используй кириллическую букву 'А'.
- Не добавляй кавычки в начале и в конце предложения.
- Замени буквы a, b, c, d, e, f, g, h, i на свои собственные числа – целые однозначные числа от -9 до 9 (включая 0).
- Не используй буквы или переменные в матрице, только числа.
- Числа должны быть выбраны так, чтобы вычисление определителя не было слишком сложным.
- Избегай дополнительных комментариев или отклонений от шаблона.

Примеры:

1. Дана матрица A = [[2, -1, 3], [4, 0, -2], [1, 5, -3]]. Чему равен определитель данной матрицы?
2. Дана матрица A = [[0, 1, -4], [-3, 2, 5], [6, -1, 3]]. Чему равен определитель данной матрицы?
3. Дана матрица A = [[1, 0, 2], [-2, 3, -1], [4, -3, 1]]. Чему равен определитель данной матрицы?
"""
    handle_template_mode(template, "Вычисление определителя матрицы 3x3", operation="determinant")


def handle_matrix_multiplication_2x2_mode():
    template = """Составь задание без вариантов ответа и без решения, в котором требуется выполнить умножение двух матриц 2x2.

Требования:

- Используй следующий шаблон:
Даны матрицы A = [[a₁, b₁], [c₁, d₁]] и B = [[a₂, b₂], [c₂, d₂]]. Найдите результат их произведения.
- Не добавляй кавычки в начале и в конце предложения.
- Все a₁, b₁, c₁, d₁, a₂, b₂, c₂, d₂ целые числа от -9 до 9.
- Не используй переменные, только числа.
- Избегай дополнительных комментариев или отклонения от шаблона.
- В конце задания обязательно добавь следующую инструкцию: "Ответ запишите в виде (a | b c | d). Например, результат умножения матриц A = [[1, 2], [3, 4]] и B = [[4, 3], [2, 1]] записывается в виде (8 | 5 20 | 13).".

Пример:

Даны матрицы A = [[2, -1], [0, 3]] и B = [[1, 4], [-2, 2]]. Найдите результат их произведения.
Ответ запишите в виде (a | b c | d). Например, результат умножения матриц A = [[1, 2], [3, 4]] и B = [[4, 3], [2, 1]] записывается в виде (8 | 5 20 | 13).
"""
    handle_template_mode(template, "Умножение матриц 2x2", operation="multiplication")


def handle_matrix_multiplication_3x3_mode():
    template = """Составь задание без вариантов ответа и без решения, в котором требуется выполнить умножение двух матриц 3x3.

Требования:

- Используй следующий шаблон:
Даны матрицы A = [[a₁, b₁, c₁], [d₁, e₁, f₁], [g₁, h₁, i₁]] и B = [[a₂, b₂, c₂], [d₂, e₂, f₂], [g₂, h₂, i₂]]. Найдите результат их произведения.
- Не добавляй кавычки в начале и в конце предложения.
- Все элементы целые числа от -9 до 9.
- Не используй переменные, только числа.
- Избегай дополнительных комментариев или отклонения от шаблона.
- В конце задания обязательно добавь следующую инструкцию: "Ответ запишите в виде (a | b | c d | e | f g | h | i). Например, результат умножения матриц A = [[1, 2, 3], [1, 2, 3], [1, 2, 3]] и B = [[3, 2, 1], [3, 2, 1], [3, 2, 1]] записывается в виде (18 | 12 | 6 18 | 12 | 6 18 | 12 | 6).".

Пример:

Даны матрицы A = [[1, 0, 2], [-2, 3, -1], [4, -3, 1]] и B = [[0, 1, -4], [-3, 2, 5], [6, -1, 3]]. Найдите результат их произведения.
Ответ запишите в виде (a | b | c d | e | f g | h | i). Например, результат умножения матриц A = [[1, 2, 3], [1, 2, 3], [1, 2, 3]] и B = [[3, 2, 1], [3, 2, 1], [3, 2, 1]] записывается в виде (18 | 12 | 6 18 | 12 | 6 18 | 12 | 6).
"""
    handle_template_mode(template, "Умножение матриц 3x3", operation="multiplication")


def handle_matrix_trace_mode():
    template = """Составь задание без вариантов ответа и без решения, в котором требуется вычислить след квадратной матрицы 4x4.

Требования:

- Используй следующий шаблон:
Дана матрица A = [[a, b, c, d], [e, f, g, h], [i, j, k, l], [m, n, o, p]]. Чему равен след данной матрицы?
- Важно: используй только латинскую букву 'A' для обозначения матрицы.
- Не добавляй кавычки в начале и конце предложения.
- Замени буквы на целые числа от -99 до 99 (включая 0).
- Не используй переменные, только числа.
- Избегай дополнительных комментариев или отклонений от шаблона.

Пример:
Дана матрица A = [[1, -2, 3, 0], [0, 4, -1, 2], [5, 6, 0, -3], [-4, 1, 2, 3]]. Чему равен след данной матрицы?
"""
    handle_template_mode(template, "Вычисление следа матрицы 4x4", operation="trace")


def handle_matrix_rank_mode():
    template = """Составь задание без вариантов ответа и без решения, в котором требуется вычислить ранг квадратной матрицы 3x3.

Требования:

- Используй следующий шаблон:
Дана матрица A = [[a, b, c], [d, e, f], [g, h, i]]. Чему равен ранг данной матрицы?
- Важно: используй только латинскую букву 'A' для обозначения матрицы.
- Не добавляй кавычки в начале и конце предложения.
- Замени буквы на целые числа от -99 до 99 (включая 0).
- Не используй переменные, только числа.
- Избегай дополнительных комментариев или отклонений от шаблона.

Пример:
Дана матрица A = [[1, 2, 3], [0, -1, 4], [5, 6, 0]]. Чему равен ранг данной матрицы?
"""
    handle_template_mode(template, "Вычисление ранга матрицы 3x3", operation="rank")


def handle_matrix_expression_mode():
    n1 = random.randint(1, 4)
    n2 = random.randint(1, 4)

    template = f"""Составь задание без вариантов ответа и без решения, в котором требуется вычислить выражение {n1}A + {n2}B для двух заданных матриц A и B.

Требования:

- Используй следующий шаблон:
Вычислите {n1}A + {n2}B, если A = [[a₁, b₁], [c₁, d₁]], B = [[a₂, b₂], [c₂, d₂]].
- Не добавляй кавычки в начале и конце предложения.
- Все числа матриц A и B – целые числа от -99 до 99.
- Избегай дополнительных комментариев или отклонений от шаблона.
- В конце задания обязательно добавь следующую инструкцию: "Ответ запишите в виде (a | b c | d). Например, результат умножения матриц A = [[1, 2], [3, 4]] записывается в виде (1 | 2 3 | 4).".

Пример:

Вычислите {n1}A + {n2}B, если 
A = [[1, 0], [3, -4]], 
B = [[2, 3], [1, -1]].
Ответ запишите в виде (a | b c | d). Например, результат умножения матриц A = [[1, 2], [3, 4]] записывается в виде (1 | 2 3 | 4).
"""
    handle_template_mode(template, f"Вычисление выражения nA + nB", operation="matrix_expression")
